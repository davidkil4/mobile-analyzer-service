==== Prompt Sent @ 2025-05-06T21:08:36.570394 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.593702 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.594749 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.595402 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.595971 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.596655 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.597332 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.598689 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.601274 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:08:36.602527 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:45.995963 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.021031 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:10:46.021992 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:10:46.022940 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.023642 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:10:46.024223 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:10:46.024864 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.025461 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.026003 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.026564 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.027175 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.029254 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.030392 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:46.031110 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:10:54.581754 (Attempt 2) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:10:54.942033 (Attempt 2) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:10:55.197416 (Attempt 2) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:10:55.315346 (Attempt 2) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:02.648353 (Attempt 3) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:03.197825 (Attempt 3) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:03.566006 (Attempt 3) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:04.186088 (Attempt 3) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:49.178416 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.196342 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:49.197054 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:49.197851 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.198452 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:49.199045 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:49.199781 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.201868 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.202628 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.203324 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.203981 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.204676 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.205271 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:49.206804 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:11:57.707374 (Attempt 2) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:57.977961 (Attempt 2) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:58.237243 (Attempt 2) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:11:58.495880 (Attempt 2) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:12:05.740175 (Attempt 3) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:12:06.259219 (Attempt 3) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:12:06.985443 (Attempt 3) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:12:07.216897 (Attempt 3) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:37.387464 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.423718 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:37.424510 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:37.425130 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.425749 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:37.426380 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:37.427040 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.427604 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.431560 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.434181 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.435291 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.435967 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.436677 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:37.437308 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:16:45.935266 (Attempt 2) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:46.112187 (Attempt 2) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:46.188787 (Attempt 2) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:47.022379 (Attempt 2) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:54.002282 (Attempt 3) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:54.238273 (Attempt 3) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:54.823777 (Attempt 3) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:16:55.942192 (Attempt 3) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:25.285845 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.320500 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:25.321612 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:25.322361 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.322975 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:25.323591 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:25.324725 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.326091 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.326785 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.327392 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.327977 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.329803 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.331946 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:25.332918 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:17:34.351607 (Attempt 2) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:34.446523 (Attempt 2) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:34.716912 (Attempt 2) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:35.036542 (Attempt 2) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:42.011802 (Attempt 3) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:42.862569 (Attempt 3) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:43.284079 (Attempt 3) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:17:43.911021 (Attempt 3) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:18:20.348842 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.370567 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_example_1",
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:18:20.371350 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fill_example_1",
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "fill_present_simple_1",
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:18:20.371923 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.372456 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_example_1",
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:18:20.373054 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fill_example_1",
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "fill_present_simple_1",
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:18:20.373662 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.376082 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.377047 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.377650 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.378514 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.379927 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.381208 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:18:20.382300 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:51.609317 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:51.634847 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_example_1",
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:51:51.635874 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fill_example_1",
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "fill_present_simple_1",
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:51:51.636530 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:51.637197 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_example_1",
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:51:51.637833 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fill_example_1",
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "fill_present_simple_1",
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T21:51:56.474764 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:56.477244 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:56.479237 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:56.481006 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:56.483965 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:56.485867 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:58.600205 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T21:51:58.601104 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance.",
    "recap": "Summarize the key takeaway in one sentence, in a friendly and supportive tone."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural.",
    "recap": "Remember: add 'it' after 'like' to make your meaning clear!"
  }
}

==== Prompt Sent @ 2025-05-06T22:00:29.590723 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:29.614593 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_example_1",
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T22:00:29.616005 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fill_example_1",
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "fill_present_simple_1",
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T22:00:29.618377 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:29.619621 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_example_1",
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T22:00:29.620748 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fill_example_1",
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "fill_present_simple_1",
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T22:00:34.732986 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:34.735501 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:34.739317 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:34.741650 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:34.742989 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:34.744777 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:37.211601 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:00:37.212344 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Explain the main error or concept in detail, referencing the learner's original and corrected utterance."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "In English, we usually say 'I like it very much.' The object pronoun 'it' is needed to show what you like. Your corrected sentence, 'I like it very much,' is clear and natural."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:13.205943 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:13.230985 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_example_1",
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T22:03:13.231972 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fill_example_1",
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "fill_present_simple_1",
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T22:03:13.232655 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:13.233290 (Attempt 1) ====
You are an expert English teacher. Create 2 multiple choice questions (MCQ) based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each MCQ should have a clear question and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_example_1",
      "type": "MCQ",
      "question": "The question text",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for a permanent home?",
      "options": ["I'm living in London.", "I live in London.", "I am live in London."],
      "feedback": [
        {"option_text": "I'm living in London.", "is_correct": false, "explanation": "Present continuous is for temporary actions."},
        {"option_text": "I live in London.", "is_correct": true, "explanation": "Simple present is correct for permanent residence."},
        {"option_text": "I am live in London.", "is_correct": false, "explanation": "This is not a valid English sentence."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T22:03:13.233971 (Attempt 1) ====
You are an expert English teacher. Create 2 fill-in-the-blank multiple choice problems based on the analyzed utterance and error analysis below.

Instructions:
- Output ONLY valid JSON in the following format.
- Each problem should have a unique, meaningful sentence with one blank and 2-4 answer choices.
- Only one option should be correct.
- Provide clear feedback for each choice.
- Do NOT include any extra text or commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fill_example_1",
      "type": "FillBlankChoice",
      "question_template": "Sentence with a blank, e.g., 'I ____ in Paris.'",
      "options": ["option1", "option2", "option3"],
      "feedback": [
        {
          "option_text": "option1",
          "is_correct": false,
          "explanation": "Why this option is incorrect"
        },
        {
          "option_text": "option2",
          "is_correct": true,
          "explanation": "Why this is correct"
        },
        {
          "option_text": "option3",
          "is_correct": false,
          "explanation": "Why this is incorrect"
        }
      ]
    }
    // ...repeat for each problem
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "fill_present_simple_1",
      "type": "FillBlankChoice",
      "question_template": "I _______ in Paris. I like it there.",
      "options": ["living", "live", "am live"],
      "feedback": [
        {"option_text": "living", "is_correct": false, "explanation": "'Living' needs a helping verb."},
        {"option_text": "live", "is_correct": true, "explanation": "'Live' is correct for permanent residence."},
        {"option_text": "am live", "is_correct": false, "explanation": "This is not a valid verb form."}
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T22:03:18.242983 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I like very I I like very much.",
  "corrected": "I really like it very much.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I like very I I like very much.",
      "corrected_clause_text": "I really like it very much.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Repetitive and incorrect phrasing 'I like very I I like very much'",
          "correction": "I really like it very much"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing liking",
      "category": "Sentence_Stem",
      "component": "I really like it",
      "frequency": 4.0,
      "context": "Expressing strong positive feeling.",
      "note": null
    },
    {
      "intention": "Expressing liking",
      "category": "Polyword",
      "component": "very much",
      "frequency": 4.0,
      "context": "Intensifying positive feeling.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction removes the repetition and makes the sentence more concise and natural.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:18.245607 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "before I didn't use any computer.",
  "corrected": "Before that, I didn't use a computer.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.23,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "before I didn't use any computer.",
      "corrected_clause_text": "Before that, I didn't use a computer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Missing clarifying phrase before 'I didn't use any computer'",
          "correction": "Before that"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'computer'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing past state",
      "category": "Pattern",
      "component": "Before that, I didn't [action]",
      "frequency": 3.5,
      "context": "Common in narratives.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections add necessary context and an indefinite article, improving the sentence's clarity and grammar.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:18.248709 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "First reason is I said near here,",
  "corrected": "The first reason is that it's nearby,",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2367,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "First reason is I said near here,",
      "corrected_clause_text": "The first reason is that it's nearby,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The first reason is that it's nearby"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Unnatural phrasing 'I said near here'",
          "correction": "it's nearby"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Giving reason",
      "category": "Sentence_Stem",
      "component": "The first reason is that...",
      "frequency": 3.5,
      "context": "Common in explanations.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:18.251412 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Hollin Country is famous for competition of companies.",
  "corrected": "The Hollin Country Club is known for its corporate competitions.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.2792,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Hollin Country is famous for competition of companies.",
      "corrected_clause_text": "The Hollin Country Club is known for its corporate competitions.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Missing article and unnatural phrasing",
          "correction": "The Hollin Country Club is known for its corporate competitions."
        },
        {
          "category": "Compound Formation",
          "severity": "moderate",
          "error": "Unnatural compound formation 'competition of companies'",
          "correction": "corporate competitions"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Frame",
      "component": "[Subject] is known for [characteristic]",
      "frequency": 3.0,
      "context": "Common in descriptions.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction improves the phrasing and word choice, making the sentence more natural and grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:18.252925 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "So, many times, urr  she urr invite her dog or cat in her room and speak.",
  "corrected": "So she often invites her dog or cat into her room to talk.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3113,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "So, many times, she invite her dog or cat in her room and speak.",
      "corrected_clause_text": "So she often invites her dog or cat into her room to talk.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect phrasing 'invite...and speak'",
          "correction": "often invites...to talk"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "moderate",
          "error": "Incorrect preposition 'in'",
          "correction": "into"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "So [subject] [verb]",
      "frequency": 4.0,
      "context": "Common way to explain a consequence or reason.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence structure and word choice, making it more natural and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:18.254309 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Work Japan belong  the com com competition  not pro pro golfer, but urr our urr ur  company or XXX03 or a XXX04 or the companies belong to that competition.",
  "corrected": "The Work Japan competition is for corporate golfers, not professionals. But our company, XXX03, XXX04, and other companies participate in that competition.",
  "priority_score": 0.576,
  "metrics": {
    "C": 0.353,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Work Japan belong the com com competition not pro pro golfer",
      "corrected_clause_text": "The Work Japan competition is for corporate golfers, not professionals.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Improper sentence structure",
          "correction": "The Work Japan competition is for corporate golfers, not professionals."
        }
      ]
    },
    {
      "text": "but our company or XXX03 or a XXX04 or the companies belong to that competition.",
      "corrected_clause_text": "But our company, XXX03, XXX04, and other companies participate in that competition.",
      "errors": [
        {
          "category": "Conjunction Usage",
          "severity": "minor",
          "error": "Improper use of conjunctions",
          "correction": "But our company, XXX03, XXX04, and other companies participate in that competition."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing clarification",
      "category": "Frame",
      "component": "[Event] is for [participants], not [others]",
      "frequency": 2.5,
      "context": "Used to specify participants or exclusions.",
      "note": null
    },
    {
      "intention": "Giving examples",
      "category": "Pattern",
      "component": "But our company, X, Y, and other companies...",
      "frequency": 3.0,
      "context": "Used to provide specific instances.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections effectively restructure the sentence and clarify the meaning, addressing multiple grammatical issues.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:20.192172 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I use  computer only for E-mail.",
  "corrected": "I use my computer only for email.",
  "priority_score": 0.493,
  "metrics": {
    "C": 0.2133,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I use computer only for E-mail.",
      "corrected_clause_text": "I use my computer only for email.",
      "errors": [
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing possessive pronoun before 'computer'",
          "correction": "my"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating usage",
      "category": "Pattern",
      "component": "I use [object] only for [purpose]",
      "frequency": 3.0,
      "context": "Explaining limited usage.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's grammar and naturalness by adding a possessive pronoun and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T22:03:20.193316 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My computer is note P C err made by N E C.",
  "corrected": "My computer is a notebook PC made by NEC.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.295,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My computer is note PC err made by NEC.",
      "corrected_clause_text": "My computer is a notebook PC made by NEC.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect word choice 'note'",
          "correction": "notebook"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing indefinite article before 'notebook'",
          "correction": "a"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Providing information",
      "category": "Pattern",
      "component": "[Possession] is a [type] [made by]",
      "frequency": 3.0,
      "context": "Describing objects, common in technical contexts.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections accurately change \"note\" to \"notebook\" and add the necessary indefinite article, improving clarity and grammatical correctness.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:18:51.732789 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:18:51.762997 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:18:53.352522 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:18:53.354864 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:18:53.356888 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:18:53.358554 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:18:53.360608 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:18:55.552399 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:23:27.274279 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:23:27.297350 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:23:29.012758 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:23:29.014148 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:23:29.015283 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:23:29.016354 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:23:29.017393 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:23:30.359756 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:26:42.605084 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:26:42.633095 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create 2 Multiple Choice Questions (MCQs) based on the provided 'utterance_json'. Each MCQ will test the learner's understanding of a specific GRAMMAR point.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You can draw inspiration from other errors listed in the utterance's main 'errors' list or 'clauses[n].errors' fields, but ensure they are relevant to the main 'selected_error'.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:26:42.634278 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create 2 Fill-in-the-Blank (Multiple Choice) problems based on the provided 'utterance_json'. Each problem will test the learner's ability to supply the correct word or phrase for a specific GRAMMAR point.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - Create a sentence with a single blank (`____`). This sentence MUST be based on the 'corrected' text from 'utterance_json'.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You can draw inspiration from other 'errors' in 'utterance_json' if relevant.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:26:42.634901 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:26:42.635560 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create 2 Multiple Choice Questions (MCQs) based on the provided 'utterance_json'. Each MCQ will test the learner's understanding of a specific GRAMMAR point.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You can draw inspiration from other errors listed in the utterance's main 'errors' list or 'clauses[n].errors' fields, but ensure they are relevant to the main 'selected_error'.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:26:42.636311 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create 2 Fill-in-the-Blank (Multiple Choice) problems based on the provided 'utterance_json'. Each problem will test the learner's ability to supply the correct word or phrase for a specific GRAMMAR point.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - Create a sentence with a single blank (`____`). This sentence MUST be based on the 'corrected' text from 'utterance_json'.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You can draw inspiration from other 'errors' in 'utterance_json' if relevant.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:26:49.132399 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:26:49.133875 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:26:49.136119 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:26:49.138196 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:26:49.139502 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:26:51.150696 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:32:38.983538 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:32:39.030700 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:32:39.035887 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:32:39.039260 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:32:39.046051 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:32:39.050012 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:32:44.462743 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:32:44.465516 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:32:44.467631 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:32:44.469220 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:32:44.470822 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:32:45.843652 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:40.585351 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:40.612778 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:37:40.613943 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:37:40.614835 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:40.617798 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:37:40.618785 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:37:46.391221 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:46.393094 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:46.394303 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:46.395179 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:46.397398 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:47.789459 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:37:47.790684 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 1 Multiple Choice Questions (MCQs). **ALL** 1 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 1 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 1 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:37:47.792177 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 1 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 1 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 1 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 1 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 1 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:09.054710 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:50:09.074901 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:09.076122 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:09.076902 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:50:09.077660 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:09.080263 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.256587 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:50:14.258933 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.260132 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.261151 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:50:14.264296 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.265844 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.267160 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:50:14.269984 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.288784 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.290561 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:50:14.315801 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.345506 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.346367 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:50:14.347464 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:14.349865 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:50:20.954503 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:53:48.755213 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:53:48.781507 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:48.782717 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:48.783531 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:53:48.787165 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:48.788565 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.498305 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:53:53.500320 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.501745 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.504796 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:53:53.506361 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.507737 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.510770 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:53:53.511826 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.512861 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.513800 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:53:53.515730 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.517203 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.518457 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:53:53.519663 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:53.522841 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:53:59.408172 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:55:36.275285 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:55:36.300179 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:36.301433 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:36.302204 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:55:36.302910 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:36.303738 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.400845 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:55:42.404370 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.406581 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.409285 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:55:42.411466 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.414884 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.416988 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:55:42.419451 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.420936 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.423912 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:55:42.427176 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.429614 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.431049 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-06T23:55:42.432181 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:42.433391 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-06T23:55:47.939464 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:09:15.468572 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:09:15.495027 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:15.497055 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:15.501351 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:09:15.502796 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:15.503861 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.681018 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:09:20.682824 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.686021 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.687423 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:09:20.688580 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.691858 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.693250 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:09:20.694457 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.697563 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.698598 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:09:20.699720 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.701060 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.704124 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:09:20.705389 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:20.707041 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:09:26.094091 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:13:23.297282 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:13:23.320877 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:23.321889 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "ma may I can I buy super express ticket here?",
  "corrected": "Can I buy a super express ticket here?",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2453,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "may I can I buy super express ticket here?",
      "corrected_clause_text": "Can I buy a super express ticket here?",
      "errors": [
        {
          "category": "Auxiliary/Modal Verbs",
          "severity": "moderate",
          "error": "Redundant use of modal verbs 'may I can I'",
          "correction": "Can I"
        },
        {
          "category": "Article/Preposition/Determiner/Quantifier",
          "severity": "minor",
          "error": "Missing article before 'super express ticket'",
          "correction": "a super express ticket"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Asking about purchasing options",
      "category": "Sentence_Stem",
      "component": "Can I buy...",
      "frequency": 4.0,
      "context": "Common way to inquire about purchasing something.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections remove redundant modal verbs and add a missing article, improving the grammatical accuracy and fluency of the sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:23.322546 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:13:23.323223 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:23.323969 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Now, I'm living XXX05, XXX06 XXX06, urr XXX07.",
  "corrected": "Now, I live in XXX05, XXX06, XXX07.",
  "priority_score": 0.553,
  "metrics": {
    "C": 0.3639,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Now, I'm living XXX05",
      "corrected_clause_text": "Now, I live in XXX05,",
      "errors": [
        {
          "category": "Verb Tense/Aspect",
          "severity": "minor",
          "error": "Incorrect tense 'I'm living'",
          "correction": "I live"
        }
      ]
    },
    {
      "text": "XXX06 XXX06",
      "corrected_clause_text": "XXX06,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "minor",
          "error": "Redundant repetition of XXX06",
          "correction": "XXX06"
        }
      ]
    },
    {
      "text": "XXX07.",
      "corrected_clause_text": "XXX07.",
      "errors": []
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Introducing location",
      "category": "Sentence_Stem",
      "component": "Now, I live in...",
      "frequency": 4.0,
      "context": "Common in describing current residence.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections are minor but improve the tense and remove redundancy, resulting in a more polished sentence.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.702775 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:13:28.705647 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.709245 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "It it my problem is only one.",
  "corrected": "My only problem is this one.",
  "priority_score": 0.535,
  "metrics": {
    "C": 0.22,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "It my problem is only one.",
      "corrected_clause_text": "My only problem is this one.",
      "errors": [
        {
          "category": "Word Order",
          "severity": "moderate",
          "error": "Incorrect word order",
          "correction": "My only problem is this one"
        },
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incorrect sentence structure",
          "correction": "My only problem is this one"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Stating a problem",
      "category": "Frame",
      "component": "My only problem is ___",
      "frequency": 3.0,
      "context": "Highlighting a specific issue.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction significantly improves the sentence structure and word order, making it clearer and more grammatically sound.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.710835 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:13:28.715657 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.717927 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "I'm not so orr not so good golf player.",
  "corrected": "I'm not a very good golfer.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2067,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "I'm not so orr not so good golf player.",
      "corrected_clause_text": "I'm not a very good golfer.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnatural sentence structure",
          "correction": "I'm not a very good golfer."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing self-assessment",
      "category": "Frame",
      "component": "I'm not a very good ___",
      "frequency": 3.5,
      "context": "Common in self-deprecating remarks.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction simplifies the sentence, making it more concise and grammatically correct.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.719475 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:13:28.720751 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.725136 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "but I found urr In Internet Internet, especially E-mail, is very useful for us.",
  "corrected": "but I found that the internet, especially email, is very useful for us.",
  "priority_score": 0.516,
  "metrics": {
    "C": 0.2883,
    "A": 0.6977,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but I found In Internet Internet",
      "corrected_clause_text": "but I found that the internet,",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Repetitive and unclear phrasing 'In Internet Internet'",
          "correction": "that the internet"
        }
      ]
    },
    {
      "text": "especially E-mail, is very useful for us.",
      "corrected_clause_text": "especially email, is very useful for us.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "minor",
          "error": "Incorrect capitalization of 'E-mail'",
          "correction": "email"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Expressing usefulness",
      "category": "Pattern",
      "component": "[Object], especially [specific object], is very useful for us",
      "frequency": 3.0,
      "context": "Common in workplace settings.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve the sentence's clarity and grammar by removing repetition and correcting capitalization.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.726945 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:13:28.730104 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.731993 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "Before, urr twice or three times per month.",
  "corrected": "Before, I played twice or three times a month.",
  "priority_score": 0.453,
  "metrics": {
    "C": 0.2875,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "Before, twice or three times per month.",
      "corrected_clause_text": "Before, I played twice or three times a month.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Incomplete sentence structure",
          "correction": "Before, I played twice or three times a month."
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Describing frequency",
      "category": "Frame",
      "component": "Before, I played ___ times a month",
      "frequency": 3.0,
      "context": "Common in recounting past habits.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction provides a complete and grammatically correct sentence, fixing the incomplete structure of the original.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.734022 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

==== Prompt Sent @ 2025-05-07T00:13:28.736092 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Multiple Choice Questions (MCQs). **ALL** 2 MCQs **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json`. Do not create questions based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. Pay close attention to its 'description' (what the error is) and 'correction' (how to fix it) fields.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create MCQs that help a student learn to move from their 'original' utterance to the 'corrected' version, specifically addressing the grammar issue highlighted by 'selected_error'.

MCQ Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - Use 'selected_error.description' to understand the nature of the grammar error and 'selected_error.correction' to see the fix.
    - The 'reason' field provides additional context for this choice.
- Question Stem:
    - Formulate a question that directly tests the grammar rule violated, as described in 'selected_error.description'.
    - The question should implicitly or explicitly reference the context of the 'original' and 'corrected' sentences. Example: "Which sentence correctly applies [grammar concept from selected_error.description]?"
- Correct Option (One Best Answer):
    - This option MUST be derived from the 'corrected' text in 'utterance_json', specifically reflecting the correction detailed in 'selected_error.correction'.
- Plausible Distractors:
    - One distractor MUST be the relevant part of the 'original' text from 'utterance_json' that contains the 'selected_error'.
    - Other distractors should be common, related grammatical errors. You may look at other errors listed in the utterance's main `errors` list or `clauses[n].errors` fields **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the question about the `selected_error`*. **Do NOT create new questions based on these other errors.** Your focus for ALL 2 questions must remain on the `selected_error`.
    - All options should be grammatically plausible to some extent, and parallel in form and length if possible.
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and 'selected_error.correction', and how it improves upon the 'original' text.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON in the format below.
- 24 options per question.
- Exactly one correct option.
- Provide feedback for every option.
- Do NOT include any extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "mcq_1",
      "type": "MCQ",
      "question": "Which sentence correctly uses the article before super express ticket?",
      "options": [
        "May I buy a super express ticket here?",
        "Can I buy a super express ticket here?",
        "I can buy super express ticket here."
      ],
      "feedback": [
        {
          "option_text": "May I buy a super express ticket here?",
          "is_correct": false,
          "explanation": "While grammatically okay, 'May I' is more formal. The main issue was the article, but 'Can I' is a more common and direct way to ask this question in this context."
        },
        {
          "option_text": "Can I buy a super express ticket here?",
          "is_correct": true,
          "explanation": "Correct! This uses the common modal 'Can I' and correctly includes the article 'a'."
        },
        {
          "option_text": "I can buy super express ticket here.",
          "is_correct": false,
          "explanation": "This is a statement, not a question, and it's missing the article 'a'."
        }
      ]
    }
    // Potentially more MCQ objects here if 2 > 1
  ]
}

Example:
{
  "problems": [
    {
      "problem_id": "mcq_permanent_home_1",
      "type": "MCQ",
      "question": "Which sentence is correct for expressing permanent residence?",
      "options": [
        "Im living in London.",
        "I live in London.",
        "I will live in London."
      ],
      "feedback": [
        {
          "option_text": "Im living in London.",
          "is_correct": false,
          "explanation": "Present continuous implies a temporary action, not a permanent state."
        },
        {
          "option_text": "I live in London.",
          "is_correct": true,
          "explanation": "Simple present is correct for a permanent situation."
        },
        {
          "option_text": "I will live in London.",
          "is_correct": false,
          "explanation": "Future tense indicates a future action, not current residence."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:28.737249 (Attempt 1) ====
You are an expert EFL curriculum designer. Your task is to create **exactly** 2 Fill-in-the-Blank (Multiple Choice) problems. **ALL** 2 problems **MUST** be based *exclusively* on the single specific grammar error detailed in the `selected_error` field of the provided `utterance_json` (specifically its `correction` and `description` fields). Do not create problems based on other errors in the utterance.

The 'utterance_json' you receive will always have 'focus_type': "GRAMMAR". Key information includes:
- 'original': The student's original utterance.
- 'corrected': The corrected version of the utterance.
- 'selected_error': An object detailing the specific grammar error to focus on. The 'correction' field within 'selected_error' often directly indicates the word/phrase that should be tested in the blank. Also refer to 'selected_error.description'.
- 'reason': An explanation for why this grammar point was chosen.
- 'clauses': (Optional context) A breakdown of the utterance into clauses.
- 'errors': (Optional context) A list of all errors found in the entire utterance.

Your goal is to create Fill-in-the-Blank problems that help a student learn to produce the 'corrected' utterance, focusing on the specific word or phrase highlighted by 'selected_error' (especially its 'correction' field).

Fill-Blank Design Principles:
- Target Identification:
    - The teaching point is a GRAMMAR error, detailed in the 'selected_error' object.
    - The blank should target the specific word/phrase indicated by 'selected_error.correction'. Use 'selected_error.description' to understand the grammar rule involved.
    - The 'reason' field provides additional context.
- Question Template (Context):
    - For **each** of the 2 problems, create a sentence with a single blank (`____`). This sentence MUST be based on the `corrected` text from the *provided* `utterance_json` and target the `selected_error`.
    - The word/phrase that fills the blank should be precisely the targeted element from 'selected_error.correction'.
- Correct Option (One Best Answer):
    - This option is the exact word or phrase from 'selected_error.correction' (and thus from the 'corrected' text) that correctly fills the blank.
- Plausible Distractors:
    - One distractor MUST be the corresponding word/phrase from the 'original' text in 'utterance_json', if it differs from the correct option and is relevant to the 'selected_error'.
    - Other distractors should be common, related grammatical errors for the targeted word/phrase. You may look at other `errors` in `utterance_json` **only** to understand the learner's overall proficiency or to find inspiration for common related grammatical errors that can serve as *plausible distractors for the problem targeting the `selected_error`*. **Do NOT create new problems based on these other errors.** Your focus for ALL 2 problems must remain on the `selected_error`.
    - All options should be of the same grammatical category (e.g., all verbs, all prepositions).
- Feedback for Each Option:
    - For the correct option: Explain why it's correct, referencing 'selected_error.description' and how it fits into the 'corrected' sentence structure.
    - For incorrect options: Explain the specific error, especially for the distractor based on the 'original' text. Relate the error back to 'selected_error.description'.

Instructions:
- Output ONLY valid JSON.
- 24 options per problem.
- Exactly one correct option.
- Provide feedback for each option.
- Do NOT include extra commentary.

Input:
{
  "original": "My family is in XXX08 now because of my girl 's high school.",
  "corrected": "My family is in XXX08 because my daughter is in high school there.",
  "priority_score": 0.595,
  "metrics": {
    "C": 0.3154,
    "A": 0.6188,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "My family is in XXX08 now because of my girl's high school.",
      "corrected_clause_text": "My family is in XXX08 because my daughter is in high school there.",
      "errors": [
        {
          "category": "Sentence Structure",
          "severity": "moderate",
          "error": "Unnecessary and unclear reason clause",
          "correction": "because my daughter is in high school there"
        },
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Informal 'girl'",
          "correction": "daughter"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Explaining reason",
      "category": "Pattern",
      "component": "[Subject] is in [location] because [reason]",
      "frequency": 3.5,
      "context": "Used to provide context or justification.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The corrections improve clarity and formality, addressing issues with sentence structure and word choice.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "problems": [
    {
      "problem_id": "fillblank_1",
      "type": "FillBlankChoice",
      "question_template": "I ____ my computer only for email yesterday.",
      "options": ["use", "used", "am using"],
      "feedback": [
        {
          "option_text": "use",
          "is_correct": false,
          "explanation": "'Yesterday' indicates a past action, so the present tense 'use' is incorrect."
        },
        {
          "option_text": "used",
          "is_correct": true,
          "explanation": "Correct! 'Used' is the past tense, matching 'yesterday'."
        },
        {
          "option_text": "am using",
          "is_correct": false,
          "explanation": "Present continuous 'am using' doesn't fit with 'yesterday'."
        }
      ]
    }
    // Potentially more FillBlankChoice objects here if 2 > 1
  ]
}

Example (focus on 'selected_error' for 'article'):
{
  "problems": [
    {
      "problem_id": "fill_article_1",
      "type": "FillBlankChoice",
      "question_template": "Can I buy ____ super express ticket here?",
      "options": [
        "a",
        "an",
        "the"
      ],
      "feedback": [
        {
          "option_text": "a",
          "is_correct": true,
          "explanation": "Correct! 'A' is used before a singular, countable noun that begins with a consonant sound."
        },
        {
          "option_text": "an",
          "is_correct": false,
          "explanation": "Incorrect. 'An' is used before words starting with a vowel sound. 'Super' starts with a consonant sound."
        },
        {
          "option_text": "the",
          "is_correct": false,
          "explanation": "Incorrect. 'The' is used for specific nouns. Here, it's a general inquiry, so 'a' is more appropriate."
        }
      ]
    }
  ]
}

==== Prompt Sent @ 2025-05-07T00:13:34.423705 (Attempt 1) ====
You are an expert, friendly English teacher. Given the following analyzed utterance and its error analysis, write a concise, highly readable, and supportive explanation for the learner.

Instructions:
- Output ONLY valid JSON in the following format.
- Do NOT include any extra text or commentary.
- Use simple, supportive, and encouraging language.
- Fill all fields.
- Use the `context` field (a list of preceding conversation turns) to help you write a brief, relevant introduction. Reference what the other speaker said if possible.

Input:
{
  "original": "but by playing golf .",
  "corrected": "but from playing golf.",
  "priority_score": 0.273,
  "metrics": {
    "C": 0.1907,
    "A": 0.7866,
    "F": 0.0
  },
  "clauses": [
    {
      "text": "but by playing golf.",
      "corrected_clause_text": "but from playing golf.",
      "errors": [
        {
          "category": "Word Choice (Lexical)",
          "severity": "moderate",
          "error": "Incorrect preposition 'by'",
          "correction": "from"
        }
      ]
    }
  ],
  "pattern_analysis": [
    {
      "intention": "Contrasting information",
      "category": "Polyword",
      "component": "but from",
      "frequency": 4.0,
      "context": "Introducing a contrasting point.",
      "note": null
    }
  ],
  "context": [],
  "filtering_metadata": {
    "decision": "KEEP",
    "reason": "The correction fixes the incorrect preposition, improving the sentence's clarity.",
    "teaching_approach": null,
    "priority_level": null,
    "approach_reason": null
  },
  "adjusted_priority_score": null
}

Output JSON format:
{
  "explanations": {
    "introduction": "Briefly introduce what the learner said, referencing the conversation context if possible.",
    "main": "Directly explain the grammatical or lexical differences between the learner's original and corrected utterance. Focus on the specific errors found and how the corrections address them. Avoid conversational filler."
  }
}

Example:
{
  "explanations": {
    "introduction": "After your friend asked about your tennis elbow, you replied 'I like very much.' Let's see how to say this more naturally.",
    "main": "The original utterance 'I like very much' is missing an object pronoun. In the corrected version, 'I like it very much,' the pronoun 'it' is added after 'like' to specify what is liked, making the sentence grammatically complete and clear."
  }
}

